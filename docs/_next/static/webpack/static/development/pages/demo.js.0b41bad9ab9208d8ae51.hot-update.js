webpackHotUpdate("static/development/pages/demo.js",{

/***/ "../flowjv-react/dist/bindings/form/index.js":
/*!***************************************************!*\
  !*** ../flowjv-react/dist/bindings/form/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setupFlowJV = exports.formContext = void 0;\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"../../node_modules/react/index.js\"));\nvar flowjv_1 = __webpack_require__(/*! flowjv */ \"../flowjv/dist/index.js\");\nvar utils_1 = __webpack_require__(/*! ./utils */ \"../flowjv-react/dist/bindings/form/utils.js\");\nvar flowjv_2 = __webpack_require__(/*! flowjv */ \"../flowjv/dist/index.js\");\nvar classnames_1 = __importDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar debounce_1 = __importDefault(__webpack_require__(/*! lodash/debounce */ \"../../node_modules/lodash/debounce.js\"));\nexports.formContext = react_1.default.createContext({});\nexports.setupFlowJV = function (Config) {\n    return /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1(props) {\n            var _this = _super.call(this, props) || this;\n            _this.refSet = new Set();\n            _this.getValue = function (key) {\n                if (key === void 0) { key = \"\"; }\n                if (_this.props.value) {\n                    return utils_1.gett(_this.props.value, key);\n                }\n                return utils_1.gett(_this.state.value, key);\n            };\n            _this.setValue = function (key, value) {\n                if (_this.props.value) {\n                    var newvalue_1 = utils_1.sett(_this.props.value, key, value);\n                    _this.validate(newvalue_1, function () {\n                        var _a, _b;\n                        (_b = (_a = _this.props).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                            value: newvalue_1,\n                            isValid: _this.state.isValid,\n                        });\n                    });\n                }\n                else {\n                    var newvalue_2 = utils_1.sett(_this.state.value, key, value);\n                    _this.setState({\n                        value: newvalue_2,\n                    });\n                    _this.validate(_this.state.value, function () { var _a, _b; return (_b = (_a = _this.props).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                        value: newvalue_2,\n                        isValid: _this.state.isValid,\n                    }); });\n                }\n            };\n            _this.unsetValue = function (key) { return function () {\n                var _a, _b;\n                if (_this.props.value) {\n                    (_b = (_a = _this.props).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                        value: utils_1.unsett(_this.props.value, key),\n                        isValid: _this.state.isValid,\n                    });\n                }\n                else {\n                    _this.setState({\n                        value: utils_1.unsett(_this.state.value, key),\n                    });\n                }\n            }; };\n            _this.setTouch = function (refPath) {\n                _this.refSet.add(refPath);\n                return function () {\n                    if (!_this.state.touchMap[refPath]) {\n                        _this.setState(function (state) {\n                            var _a;\n                            return ({\n                                touchMap: __assign(__assign({}, state.touchMap), (_a = {}, _a[refPath] = true, _a)),\n                            });\n                        });\n                        _this.validate(_this.props.value ? _this.props.value : _this.state.value);\n                    }\n                };\n            };\n            _this.touchAll = function () {\n                _this.setState({\n                    touchMap: Array.from(_this.refSet).reduce(function (agg, v) {\n                        var _a;\n                        return (__assign(__assign({}, agg), (_a = {}, _a[v] = true, _a)));\n                    }, {}),\n                });\n            };\n            _this.validate = function (value, func) {\n                var result = flowjv_1.validateJSONFlow(_this.props.schema, {\n                    context: _this.props.context,\n                    data: value,\n                    options: { aggressive: true, enforceSchema: true },\n                });\n                if (!result.isValid) {\n                    var errorMap = result.errors.reduce(function (agg, v) {\n                        var _a;\n                        return (__assign(__assign({}, agg), (_a = {}, _a[v.refPath.join(\".\")] = v.msgs, _a)));\n                    }, {});\n                    _this.setState({\n                        isValid: false,\n                        errorMap: errorMap,\n                    }, func);\n                }\n                else {\n                    _this.setState({\n                        isValid: true,\n                        errorMap: {},\n                    }, func);\n                }\n            };\n            _this.getContext = function () {\n                return {\n                    data: _this.getValue(),\n                    context: _this.props.context,\n                    schema: _this.props.schema,\n                };\n            };\n            _this.getRefPathValue = function (refPath) {\n                var value;\n                if (_this.props.value) {\n                    value = utils_1.gett(_this.props.value, refPath);\n                }\n                else {\n                    value = utils_1.gett(_this.state.value, refPath);\n                }\n                var isTouched = _this.state.touchMap[refPath];\n                var errors = _this.state.errorMap[refPath] || [];\n                return {\n                    value: value,\n                    errors: isTouched ? errors : [],\n                    success: isTouched ? errors.length === 0 : false,\n                };\n            };\n            _this.renderAtom = function (ref) {\n                var refPath = ref.join(\".\");\n                var schema = flowjv_2.lookup.atom(_this.props.schema, ref);\n                if (schema === null)\n                    return null;\n                var _a = _this.getRefPathValue(refPath), errors = _a.errors, success = _a.success, value = _a.value;\n                return (react_1.default.createElement(Config, { key: refPath, schema: schema, ui: {\n                        className: \"pt-3\",\n                        label: schema.label,\n                        errors: errors,\n                        success: success,\n                        value: value,\n                        onChange: function (v) {\n                            if (schema.type === \"number\")\n                                v = +v;\n                            _this.setValue(refPath, v);\n                        },\n                        setTouch: _this.setTouch(refPath),\n                    } }));\n            };\n            _this.renderBlockBySchema = function (schema, ref) {\n                var refPath = ref.join(\".\");\n                switch (schema.type) {\n                    case \"if\": {\n                        var cond = !!flowjv_1.execJSONExpression(schema.cond, {\n                            data: _this.getValue(),\n                            context: _this.props.context,\n                            ref: _this.getValue(refPath),\n                        });\n                        var flow = cond ? schema.true : schema.false;\n                        return (react_1.default.createElement(Config, { key: refPath + \"$if\", schema: { type: \"conditionWrapper\", animKey: \"if\" }, ui: {\n                                errors: [],\n                                success: false,\n                            } }, flow &&\n                            _this.renderFlow({\n                                type: \"object\",\n                                properties: flow,\n                            }, ref)));\n                    }\n                    case \"switch\": {\n                        var cond = flowjv_1.execJSONExpression(schema.cond, {\n                            data: _this.getValue(),\n                            context: _this.props.context,\n                            ref: _this.getValue(ref.join(\".\")),\n                        });\n                        var flow = schema.cases[cond];\n                        return (react_1.default.createElement(Config, { key: refPath + \".$case\", schema: { type: \"conditionWrapper\", animKey: cond }, ui: {\n                                errors: [],\n                                success: false,\n                            } }, flow &&\n                            _this.renderFlow({ type: \"object\", properties: flow }, ref)));\n                    }\n                }\n                return null;\n            };\n            _this.renderBlockById = function (blockId) {\n                var _a = flowjv_2.lookup.block(_this.props.schema, blockId), block = _a.block, ref = _a.ref;\n                if (!block) {\n                    return null;\n                }\n                return _this.renderBlockBySchema(block, ref);\n            };\n            _this.renderFlow = function (schema, ref) {\n                var _a;\n                switch (schema.type) {\n                    case \"object\": {\n                        // Loop over all the elements.\n                        return schema.properties.map(function (objconfig) {\n                            switch (objconfig.type) {\n                                case \"if\":\n                                case \"switch\": {\n                                    return _this.renderBlockBySchema(objconfig, ref);\n                                }\n                                default: {\n                                    return _this.renderFlow(objconfig, __spreadArrays(ref, [\n                                        objconfig.key,\n                                    ]));\n                                }\n                            }\n                        });\n                    }\n                }\n                var refPath = ref.join(\".\");\n                switch (schema.type) {\n                    case \"enum\":\n                    case \"boolean\":\n                    case \"number\":\n                    case \"string\": {\n                        var render = (_a = _this.props.renderMap) === null || _a === void 0 ? void 0 : _a[refPath];\n                        if (render) {\n                            var _b = _this.getRefPathValue(refPath), errors = _b.errors, success = _b.success, value = _b.value;\n                            return render({\n                                errors: errors,\n                                success: success,\n                                value: value,\n                                onChange: function (v) { return _this.setValue(refPath, v); },\n                                setTouch: function () { return _this.setTouch(refPath); },\n                            });\n                        }\n                        return _this.renderAtom(ref);\n                    }\n                }\n            };\n            _this.state = {\n                value: _this.props.defaultValue,\n                isValid: false,\n                touchMap: {},\n                errorMap: {},\n            };\n            _this.validate = debounce_1.default(_this.validate, 300, {});\n            return _this;\n        }\n        class_1.prototype.componentDidMount = function () {\n            var _this = this;\n            this.validate(this.getValue(), function () {\n                var _a, _b;\n                (_b = (_a = _this.props).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                    value: _this.getValue(),\n                    isValid: _this.state.isValid,\n                });\n            });\n        };\n        class_1.prototype.render = function () {\n            var _this = this;\n            var _a = this.props, className = _a.className, schema = _a.schema, children = _a.children, theme = _a.theme;\n            return (react_1.default.createElement(exports.formContext.Provider, { value: {\n                    renderAtom: this.renderAtom,\n                    renderBlockById: this.renderBlockById,\n                    getValue: this.getRefPathValue,\n                    getContext: this.getContext,\n                    setValue: this.setValue,\n                    setTouch: this.setTouch,\n                } },\n                react_1.default.createElement(\"form\", { className: classnames_1.default(className, theme, \"fjv-form\"), onSubmit: function (e) {\n                        e.preventDefault();\n                        _this.touchAll();\n                        var value = _this.getValue();\n                        _this.validate(value, function () {\n                            var _a, _b;\n                            (_b = (_a = _this.props).onSubmit) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                                value: value,\n                                isValid: _this.state.isValid,\n                            });\n                        });\n                    } },\n                    this.props.prepend,\n                    children ? null : this.renderFlow(schema, []),\n                    this.props.append)));\n        };\n        return class_1;\n    }(react_1.default.Component));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZmxvd2p2LXJlYWN0L2Rpc3QvYmluZGluZ3MvZm9ybS9pbmRleC5qcz9mNWFiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ3ZGLDZCQUE2Qix1REFBdUQ7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGdEQUFnRCxPQUFPO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pELHdDQUF3QyxRQUFRO0FBQ2hELHdEQUF3RCxRQUFRO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQSw4QkFBOEIsbUJBQU8sQ0FBQyxnREFBTztBQUM3QyxlQUFlLG1CQUFPLENBQUMsdUNBQVE7QUFDL0IsY0FBYyxtQkFBTyxDQUFDLDREQUFTO0FBQy9CLGVBQWUsbUJBQU8sQ0FBQyx1Q0FBUTtBQUMvQixtQ0FBbUMsbUJBQU8sQ0FBQywwREFBWTtBQUN2RCxpQ0FBaUMsbUJBQU8sQ0FBQyw4REFBaUI7QUFDMUQsc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsbUVBQW1FLFlBQVk7QUFDL0U7QUFDQTtBQUNBLHFCQUFxQixFQUFFLEVBQUU7QUFDekI7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELDJCQUEyQjtBQUN6Riw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsZ0JBQWdCO0FBQ3BFLHFCQUFxQixJQUFJO0FBQ3pCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHdDQUF3QztBQUN0RSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGdCQUFnQjtBQUNwRSxxQkFBcUIsSUFBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEMscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHFCQUFxQixFQUFFO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHVFQUF1RSxnQ0FBZ0MsMENBQTBDO0FBQ2pKO0FBQ0E7QUFDQSw2QkFBNkIsRUFBRTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsdUVBQXVFLG1DQUFtQywwQ0FBMEM7QUFDcEo7QUFDQTtBQUNBLDZCQUE2QixFQUFFO0FBQy9CLDhDQUE4QyxtQ0FBbUM7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELG1DQUFtQyxFQUFFO0FBQzdGLHVEQUF1RCxnQ0FBZ0MsRUFBRTtBQUN6Riw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qiw0QkFBNEI7QUFDNUI7QUFDQSx1RUFBdUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsRUFBRTtBQUNuQix1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekIscUJBQXFCLEVBQUU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCIsImZpbGUiOiIuLi9mbG93anYtcmVhY3QvZGlzdC9iaW5kaW5ncy9mb3JtL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xuICAgIHJldHVybiByO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2V0dXBGbG93SlYgPSBleHBvcnRzLmZvcm1Db250ZXh0ID0gdm9pZCAwO1xudmFyIHJlYWN0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKTtcbnZhciBmbG93anZfMSA9IHJlcXVpcmUoXCJmbG93anZcIik7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xudmFyIGZsb3dqdl8yID0gcmVxdWlyZShcImZsb3dqdlwiKTtcbnZhciBjbGFzc25hbWVzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImNsYXNzbmFtZXNcIikpO1xudmFyIGRlYm91bmNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvZGFzaC9kZWJvdW5jZVwiKSk7XG5leHBvcnRzLmZvcm1Db250ZXh0ID0gcmVhY3RfMS5kZWZhdWx0LmNyZWF0ZUNvbnRleHQoe30pO1xuZXhwb3J0cy5zZXR1cEZsb3dKViA9IGZ1bmN0aW9uIChDb25maWcpIHtcbiAgICByZXR1cm4gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoY2xhc3NfMSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMShwcm9wcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5yZWZTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBfdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB2b2lkIDApIHsga2V5ID0gXCJcIjsgfVxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHNfMS5nZXR0KF90aGlzLnByb3BzLnZhbHVlLCBrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHNfMS5nZXR0KF90aGlzLnN0YXRlLnZhbHVlLCBrZXkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLnNldFZhbHVlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3ZhbHVlXzEgPSB1dGlsc18xLnNldHQoX3RoaXMucHJvcHMudmFsdWUsIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWxpZGF0ZShuZXd2YWx1ZV8xLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgKF9iID0gKF9hID0gX3RoaXMucHJvcHMpLm9uQ2hhbmdlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXd2YWx1ZV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQ6IF90aGlzLnN0YXRlLmlzVmFsaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3dmFsdWVfMiA9IHV0aWxzXzEuc2V0dChfdGhpcy5zdGF0ZS52YWx1ZSwga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXd2YWx1ZV8yLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGUoX3RoaXMuc3RhdGUudmFsdWUsIGZ1bmN0aW9uICgpIHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IF90aGlzLnByb3BzKS5vbkNoYW5nZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXd2YWx1ZV8yLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZDogX3RoaXMuc3RhdGUuaXNWYWxpZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy51bnNldFZhbHVlID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IF90aGlzLnByb3BzKS5vbkNoYW5nZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dGlsc18xLnVuc2V0dChfdGhpcy5wcm9wcy52YWx1ZSwga2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQ6IF90aGlzLnN0YXRlLmlzVmFsaWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHV0aWxzXzEudW5zZXR0KF90aGlzLnN0YXRlLnZhbHVlLCBrZXkpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyB9O1xuICAgICAgICAgICAgX3RoaXMuc2V0VG91Y2ggPSBmdW5jdGlvbiAocmVmUGF0aCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlZlNldC5hZGQocmVmUGF0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zdGF0ZS50b3VjaE1hcFtyZWZQYXRoXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3VjaE1hcDogX19hc3NpZ24oX19hc3NpZ24oe30sIHN0YXRlLnRvdWNoTWFwKSwgKF9hID0ge30sIF9hW3JlZlBhdGhdID0gdHJ1ZSwgX2EpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGUoX3RoaXMucHJvcHMudmFsdWUgPyBfdGhpcy5wcm9wcy52YWx1ZSA6IF90aGlzLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMudG91Y2hBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0b3VjaE1hcDogQXJyYXkuZnJvbShfdGhpcy5yZWZTZXQpLnJlZHVjZShmdW5jdGlvbiAoYWdnLCB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBhZ2cpLCAoX2EgPSB7fSwgX2Fbdl0gPSB0cnVlLCBfYSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBmdW5jKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZsb3dqdl8xLnZhbGlkYXRlSlNPTkZsb3coX3RoaXMucHJvcHMuc2NoZW1hLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IF90aGlzLnByb3BzLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7IGFnZ3Jlc3NpdmU6IHRydWUsIGVuZm9yY2VTY2hlbWE6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5pc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvck1hcCA9IHJlc3VsdC5lcnJvcnMucmVkdWNlKGZ1bmN0aW9uIChhZ2csIHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGFnZyksIChfYSA9IHt9LCBfYVt2LnJlZlBhdGguam9pbihcIi5cIildID0gdi5tc2dzLCBfYSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWFwOiBlcnJvck1hcCxcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IHt9LFxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBfdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBfdGhpcy5wcm9wcy5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IF90aGlzLnByb3BzLnNjaGVtYSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmdldFJlZlBhdGhWYWx1ZSA9IGZ1bmN0aW9uIChyZWZQYXRoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHV0aWxzXzEuZ2V0dChfdGhpcy5wcm9wcy52YWx1ZSwgcmVmUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHV0aWxzXzEuZ2V0dChfdGhpcy5zdGF0ZS52YWx1ZSwgcmVmUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpc1RvdWNoZWQgPSBfdGhpcy5zdGF0ZS50b3VjaE1hcFtyZWZQYXRoXTtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JzID0gX3RoaXMuc3RhdGUuZXJyb3JNYXBbcmVmUGF0aF0gfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IGlzVG91Y2hlZCA/IGVycm9ycyA6IFtdLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBpc1RvdWNoZWQgPyBlcnJvcnMubGVuZ3RoID09PSAwIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJBdG9tID0gZnVuY3Rpb24gKHJlZikge1xuICAgICAgICAgICAgICAgIHZhciByZWZQYXRoID0gcmVmLmpvaW4oXCIuXCIpO1xuICAgICAgICAgICAgICAgIHZhciBzY2hlbWEgPSBmbG93anZfMi5sb29rdXAuYXRvbShfdGhpcy5wcm9wcy5zY2hlbWEsIHJlZik7XG4gICAgICAgICAgICAgICAgaWYgKHNjaGVtYSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuZ2V0UmVmUGF0aFZhbHVlKHJlZlBhdGgpLCBlcnJvcnMgPSBfYS5lcnJvcnMsIHN1Y2Nlc3MgPSBfYS5zdWNjZXNzLCB2YWx1ZSA9IF9hLnZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAocmVhY3RfMS5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ29uZmlnLCB7IGtleTogcmVmUGF0aCwgc2NoZW1hOiBzY2hlbWEsIHVpOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwicHQtM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHNjaGVtYS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogZXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY2hlbWEudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9ICt2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFZhbHVlKHJlZlBhdGgsIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRvdWNoOiBfdGhpcy5zZXRUb3VjaChyZWZQYXRoKSxcbiAgICAgICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyQmxvY2tCeVNjaGVtYSA9IGZ1bmN0aW9uIChzY2hlbWEsIHJlZikge1xuICAgICAgICAgICAgICAgIHZhciByZWZQYXRoID0gcmVmLmpvaW4oXCIuXCIpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2NoZW1hLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlmXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25kID0gISFmbG93anZfMS5leGVjSlNPTkV4cHJlc3Npb24oc2NoZW1hLmNvbmQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBfdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IF90aGlzLnByb3BzLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBfdGhpcy5nZXRWYWx1ZShyZWZQYXRoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsb3cgPSBjb25kID8gc2NoZW1hLnRydWUgOiBzY2hlbWEuZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJlYWN0XzEuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbmZpZywgeyBrZXk6IHJlZlBhdGggKyBcIiRpZlwiLCBzY2hlbWE6IHsgdHlwZTogXCJjb25kaXRpb25XcmFwcGVyXCIsIGFuaW1LZXk6IFwiaWZcIiB9LCB1aToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sIGZsb3cgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJGbG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogZmxvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByZWYpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN3aXRjaFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZCA9IGZsb3dqdl8xLmV4ZWNKU09ORXhwcmVzc2lvbihzY2hlbWEuY29uZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IF90aGlzLmdldFZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogX3RoaXMucHJvcHMuY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IF90aGlzLmdldFZhbHVlKHJlZi5qb2luKFwiLlwiKSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbG93ID0gc2NoZW1hLmNhc2VzW2NvbmRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZWFjdF8xLmRlZmF1bHQuY3JlYXRlRWxlbWVudChDb25maWcsIHsga2V5OiByZWZQYXRoICsgXCIuJGNhc2VcIiwgc2NoZW1hOiB7IHR5cGU6IFwiY29uZGl0aW9uV3JhcHBlclwiLCBhbmltS2V5OiBjb25kIH0sIHVpOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwgZmxvdyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlckZsb3coeyB0eXBlOiBcIm9iamVjdFwiLCBwcm9wZXJ0aWVzOiBmbG93IH0sIHJlZikpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJCbG9ja0J5SWQgPSBmdW5jdGlvbiAoYmxvY2tJZCkge1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IGZsb3dqdl8yLmxvb2t1cC5ibG9jayhfdGhpcy5wcm9wcy5zY2hlbWEsIGJsb2NrSWQpLCBibG9jayA9IF9hLmJsb2NrLCByZWYgPSBfYS5yZWY7XG4gICAgICAgICAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckJsb2NrQnlTY2hlbWEoYmxvY2ssIHJlZik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyRmxvdyA9IGZ1bmN0aW9uIChzY2hlbWEsIHJlZikge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHNjaGVtYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9vcCBvdmVyIGFsbCB0aGUgZWxlbWVudHMuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NoZW1hLnByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChvYmpjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamNvbmZpZy50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpZlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3dpdGNoXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW5kZXJCbG9ja0J5U2NoZW1hKG9iamNvbmZpZywgcmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVuZGVyRmxvdyhvYmpjb25maWcsIF9fc3ByZWFkQXJyYXlzKHJlZiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamNvbmZpZy5rZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVmUGF0aCA9IHJlZi5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHNjaGVtYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVuZGVyID0gKF9hID0gX3RoaXMucHJvcHMucmVuZGVyTWFwKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbcmVmUGF0aF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gX3RoaXMuZ2V0UmVmUGF0aFZhbHVlKHJlZlBhdGgpLCBlcnJvcnMgPSBfYi5lcnJvcnMsIHN1Y2Nlc3MgPSBfYi5zdWNjZXNzLCB2YWx1ZSA9IF9iLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IGVycm9ycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLnNldFZhbHVlKHJlZlBhdGgsIHYpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUb3VjaDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0VG91Y2gocmVmUGF0aCk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVuZGVyQXRvbShyZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdG91Y2hNYXA6IHt9LFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy52YWxpZGF0ZSA9IGRlYm91bmNlXzEuZGVmYXVsdChfdGhpcy52YWxpZGF0ZSwgMzAwLCB7fSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSh0aGlzLmdldFZhbHVlKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IF90aGlzLnByb3BzKS5vbkNoYW5nZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF90aGlzLmdldFZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQ6IF90aGlzLnN0YXRlLmlzVmFsaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgc2NoZW1hID0gX2Euc2NoZW1hLCBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCB0aGVtZSA9IF9hLnRoZW1lO1xuICAgICAgICAgICAgcmV0dXJuIChyZWFjdF8xLmRlZmF1bHQuY3JlYXRlRWxlbWVudChleHBvcnRzLmZvcm1Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckF0b206IHRoaXMucmVuZGVyQXRvbSxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQmxvY2tCeUlkOiB0aGlzLnJlbmRlckJsb2NrQnlJZCxcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWU6IHRoaXMuZ2V0UmVmUGF0aFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBnZXRDb250ZXh0OiB0aGlzLmdldENvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzZXRUb3VjaDogdGhpcy5zZXRUb3VjaCxcbiAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfMS5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzXzEuZGVmYXVsdChjbGFzc05hbWUsIHRoZW1lLCBcImZqdi1mb3JtXCIpLCBvblN1Ym1pdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdWNoQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGUodmFsdWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IF90aGlzLnByb3BzKS5vblN1Ym1pdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkOiBfdGhpcy5zdGF0ZS5pc1ZhbGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcmVwZW5kLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiA/IG51bGwgOiB0aGlzLnJlbmRlckZsb3coc2NoZW1hLCBbXSksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYXBwZW5kKSkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2xhc3NfMTtcbiAgICB9KHJlYWN0XzEuZGVmYXVsdC5Db21wb25lbnQpKTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../flowjv-react/dist/bindings/form/index.js\n");

/***/ })

})